<div class="case-summary-content-wrapper">
  <div class="summary-section-grid">
    <div class="grid-row">
      <div class="grid-col-1">
        User Document Bundle
      </div>
      <div class="grid-col-1">
        Select a Test Case to compare to
      </div>
    </div>

    <br>

    <div class="grid-row">
      <div class="grid-col-1">
        <button mat-flat-button color="primary" (click)="onInputBundleClick()">Input User MDI FHIR Bundle</button>
      </div>
      <div class="grid-col-1">
        <mat-form-field>
          <mat-select (selectionChange)="onExpectedCompositionChanged($event)" value={{selectedTestCase.compositionId}}>
            <mat-option class="mat-option" *ngFor="let testCase of testCases" value="{{testCase.compositionId}}">
              {{ testCase.display }}
            </mat-option>
          </mat-select>
        </mat-form-field>    
      </div>
    </div>
  </div>
  
  <br>

  <mat-accordion multi>
    <mat-expansion-panel class="summary-section" id="caseAdminInfo" [expanded]="caseAdminInfoExpanded" >
      <mat-expansion-panel-header (click)="onItemClick( 'caseAdminInfo' )">
        <mat-panel-title class={{caseAdminInfoStyle}}>Case Administration Information</mat-panel-title>
      </mat-expansion-panel-header>
      <app-case-comparison-content-field state={{mdiToEdrs.extension.style}} title="Tracking Numbers" resource="Composition MDI TO EDRS" fhirPath="{{mdiToEdrs.expected?.resourceType}}.extension" expected={{mdiToEdrs.extension.expected}} difference={{mdiToEdrs.extension.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{practitioner.name.style}} title="Chief ME/C Name" resource="US Core Practitioner" fhirPath="{{practitioner.expected?.resourceType}}.name" expected={{practitioner.name.expected}} difference={{practitioner.name.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{practitioner.identifier.style}} title="Chief ME/C License" resource="US Core Practitioner" fhirPath="{{practitioner.expected?.resourceType}}.identifier" expected={{practitioner.identifier.expected}} difference={{practitioner.identifier.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{practitioner.telecom.style}} title="Chief ME/C Telecom" resource="US Core Practitioner" fhirPath="{{practitioner.expected?.resourceType}}.telecom" expected={{practitioner.telecom.expected}} difference={{practitioner.telecom.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{practitioner.address.style}} title="Chief ME/C Address" resource="US Core Practitioner" fhirPath="{{practitioner.expected?.resourceType}}.address" expected={{practitioner.address.expected}} difference={{practitioner.address.difference}}></app-case-comparison-content-field>
    </mat-expansion-panel>    
    
    <mat-expansion-panel class="summary-section" id="demographics" [expanded]="demographicsExpanded">
      <mat-expansion-panel-header (click)="onItemClick( 'demographics' )">
        <mat-panel-title class={{demographicsStyle}}>Demographics</mat-panel-title>
      </mat-expansion-panel-header>      
      <app-case-comparison-content-field state={{patient.name.style}} title="Name" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.name" expected={{patient.name.expected}} difference={{patient.name.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{patient.gender.style}} title="Legal Sex at Death" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.gender" expected={{patient.gender.expected}} difference={{patient.gender.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{patient.identifier.style}} title="Social Security Number" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.identifier" expected={{patient.identifier.expected}} difference={{patient.identifier.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{patient.birthDate.style}} title="Date of Birth" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.birthDate" expected={{patient.birthDate.expected}} difference={{patient.birthDate.difference}}></app-case-comparison-content-field>      
      <app-case-comparison-content-field state={{patient.race.style}} title="Race" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.extension" expected={{patient.race.expected}} difference={{patient.race.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{patient.ethnicity.style}} title="Ethnicity" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.extension" expected={{patient.ethnicity.expected}} difference={{patient.ethnicity.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{patient.address.style}} title="Residence" resource="US Core Patient" fhirPath="{{patient.expected?.resourceType}}.address" expected={{patient.address.expected}} difference={{patient.address.difference}}></app-case-comparison-content-field>      
    </mat-expansion-panel>
    
    <mat-expansion-panel class="summary-section" id="circumstances" [expanded]="circumstancesExpanded">
      <mat-expansion-panel-header (click)="onItemClick( 'circumstances' )">
        <mat-panel-title class={{circumstancesStyle}}>Circumstances</mat-panel-title>
      </mat-expansion-panel-header>
      <app-case-comparison-content-field state={{locationDeath.name.style}} title="Death Location" resource="Location-death" fhirPath="{{locationDeath.expected?.resourceType}}.valueCodeableConcept" expected={{locationDeath.name.expected}} difference={{locationDeath.name.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{locationInjury.name.style}} title="Injury Location" resource="Location-injury" fhirPath="{{locationInjury.expected?.resourceType}}.valueCodeableConcept" expected={{locationInjury.name.expected}} difference={{locationInjury.name.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{tobaccoUse.valueCodeableConcept.style}} title="Tobacco Use Contributed to Death" resource="Observation-tobacco-use" fhirPath="{{tobaccoUse.expected?.resourceType}}.valueCodeableConcept" expected={{tobaccoUse.valueCodeableConcept.expected}} difference={{tobaccoUse.valueCodeableConcept.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{pregnancy.valueCodeableConcept.style}} title="Decedent Pregnancy Status" resource="Observation-decedent-pregnancy" fhirPath="{{pregnancy.expected?.resourceType}}.valueCodeableConcept" expected={{pregnancy.valueCodeableConcept.expected}} difference={{pregnancy.valueCodeableConcept.difference}}></app-case-comparison-content-field>
    </mat-expansion-panel>

    <mat-expansion-panel class="summary-section" id="jurisdiction" [expanded]="jurisdictionExpanded">
      <mat-expansion-panel-header (click)="onItemClick( 'jurisdiction' )">
        <mat-panel-title class={{jurisdictionStyle}}>Jurisdiction</mat-panel-title>
      </mat-expansion-panel-header>
      <app-case-comparison-content-field state={{deathDate.effectiveDateTime.style}} title="Death Date/Time" resource="Observation-death-date" fhirPath="{{deathDate.expected?.resourceType}}.effectiveDateTime" expected={{deathDate.effectiveDateTime.expected}} difference={{deathDate.effectiveDateTime.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{deathDate.pronouncedDateTime.style}} title="Pronounced Date/Time" resource="Observation-death-date" fhirPath="{{deathDate.expected?.resourceType}}.component" expected={{deathDate.pronouncedDateTime.expected}} difference={{deathDate.pronouncedDateTime.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{deathDate.method.style}} title="Establishment Approach" resource="Observation-death-date" fhirPath="{{deathDate.expected?.resourceType}}.method" expected={{deathDate.method.expected}} difference={{deathDate.method.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{deathDate.typeOfDeathLocation.style}} title="Type of Death Location" resource="Observation-death-date" fhirPath="{{deathDate.expected?.resourceType}}.valueCodeableConcept" expected={{deathDate.typeOfDeathLocation.expected}} difference={{deathDate.typeOfDeathLocation.difference}}></app-case-comparison-content-field>
    </mat-expansion-panel>

    <mat-expansion-panel class="summary-section" id="causeAndManner" [expanded]="causeAndMannerExpanded">
      <mat-expansion-panel-header (click)="onItemClick( 'causeAndManner' )">
        <mat-panel-title class={{causeAndMannerStyle}}>Cause and Manner of Death</mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngFor="let causeOfDeath1 of causeOfDeath1List; let i = index">
        <app-case-comparison-content-field state={{causeOfDeath1.valueCodeableConcept.style}} title="Part 1 Immediate Cause Event {{i+1}}" resource="Observation-cause-of-death-part1" fhirPath="{{causeOfDeath1.expected?.resourceType}}.valueCodeableConcept" expected={{causeOfDeath1.valueCodeableConcept.expected}} difference={{causeOfDeath1.valueCodeableConcept.difference}}></app-case-comparison-content-field>
        <app-case-comparison-content-field state={{causeOfDeath1.component.style}} title="Part 1 Immediate Cause Interval {{i+1}}" resource="Observation-cause-of-death-part1" fhirPath="{{causeOfDeath1.expected?.resourceType}}.component" expected={{causeOfDeath1.component.expected}} difference={{causeOfDeath1.component.difference}}></app-case-comparison-content-field>
      </div>
      <app-case-comparison-content-field state={{causeOfDeath2.valueCodeableConcept.style}} title="Part 2 Contributing Cause" resource="Observation-cause-of-death-part2" fhirPath="{{mannerOfDeath.expected?.resourceType}}.valueCodeableConcept" expected={{mannerOfDeath.valueCodeableConcept.expected}} difference={{mannerOfDeath.valueCodeableConcept.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{mannerOfDeath.valueCodeableConcept.style}} title="Manner of Death" resource="Observation-manner-of-death" fhirPath="{{mannerOfDeath.expected?.resourceType}}.valueCodeableConcept" expected={{mannerOfDeath.valueCodeableConcept.expected}} difference={{mannerOfDeath.valueCodeableConcept.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{locationInjury.name.style}} title="Place of Injury" resource="Location-injury" fhirPath="{{locationInjury.expected?.resourceType}}.valueCodeableConcept" expected={{locationInjury.name.expected}} difference={{locationInjury.name.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state="invalid" title="How Injury Occurred" resource="UNKNOWN" fhirPath="UNKNOWN" expected="UNDEFINED" difference="UNDEFINED"></app-case-comparison-content-field>
      <app-case-comparison-content-field state="invalid" title="Injury Date/Time" resource="UNKNOWN" fhirPath="UNKNOWN" expected="UNDEFINED" difference="UNDEFINED"></app-case-comparison-content-field>
      <app-case-comparison-content-field state="invalid" title="Injury/Event Occurred at Work" resource="UNKNOWN" fhirPath="UNKNOWN" expected="UNDEFINED" difference="UNDEFINED"></app-case-comparison-content-field>
      <app-case-comparison-content-field state="invalid" title="Transportation Role" resource="UNKNOWN" fhirPath="UNKNOWN" expected="UNDEFINED" difference="UNDEFINED"></app-case-comparison-content-field>
    </mat-expansion-panel>  

    <mat-expansion-panel class="summary-section" id="examAndAutopsy" [expanded]="examNotesExpanded">
      <mat-expansion-panel-header (click)="onItemClick( 'examAndAutopsy' )">
        <mat-panel-title class={{examAndAutopsyStyle}}>Exam and Autopsy</mat-panel-title>
      </mat-expansion-panel-header>
      <app-case-comparison-content-field state={{autopsyPerformed.valueCodeableConcept.style}} title="Autopsy Performed" resource="Observation-autopsy-performed-indicator" fhirPath="{{autopsyPerformed.expected?.resourceType}}.valueCodeableConcept" expected={{autopsyPerformed.valueCodeableConcept.expected}} difference={{autopsyPerformed.valueCodeableConcept.difference}}></app-case-comparison-content-field>
      <app-case-comparison-content-field state={{autopsyPerformed.componentValueCodeableConcept.style}} title="Results Available" resource="Observation-autopsy-performed-indicator" fhirPath="{{autopsyPerformed.expected?.resourceType}}.component" expected={{autopsyPerformed.componentValueCodeableConcept.expected}} difference={{autopsyPerformed.componentValueCodeableConcept.difference}}></app-case-comparison-content-field>
    </mat-expansion-panel>
    
  </mat-accordion>
</div>